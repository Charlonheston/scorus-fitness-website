# Sistema de InternacionalizaciÃ³n (i18n)

## ğŸ“‹ DescripciÃ³n

El sitio Scorus Fitness soporta **4 idiomas** configurados desde el inicio:

- ğŸ‡ªğŸ‡¸ **EspaÃ±ol (ES)** - Idioma por defecto
- ğŸ‡¬ğŸ‡§ **InglÃ©s (EN)**
- ğŸ‡«ğŸ‡· **FrancÃ©s (FR)**
- ğŸ‡©ğŸ‡ª **AlemÃ¡n (DE)**

## ğŸ—ï¸ Estructura del Sistema

### Herramienta: **astro-i18next**

Usamos [astro-i18next](https://github.com/yassinedoghri/astro-i18next) que proporciona:
- TraducciÃ³n de contenido
- Routing multi-idioma
- DetecciÃ³n automÃ¡tica de idioma
- Cambio de idioma sin recargar

### Archivos de ConfiguraciÃ³n

#### 1. `astro-i18next.config.mjs`
```javascript
{
  defaultLocale: "es",          // EspaÃ±ol por defecto
  locales: ["es", "en", "fr", "de"],
  routes: {
    // Rutas traducidas para cada idioma
    en: { "servicios": "services", ... },
    fr: { "servicios": "services", ... },
    de: { "servicios": "dienstleistungen", ... }
  },
  namespaces: ["common", "home", "services", ...],
  defaultNamespace: "common"
}
```

#### 2. Archivos de TraducciÃ³n

Ubicados en `public/locales/{lang}/{namespace}.json`

```
public/locales/
â”œâ”€â”€ es/
â”‚   â”œâ”€â”€ common.json
â”‚   â”œâ”€â”€ home.json
â”‚   â””â”€â”€ services.json
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ common.json
â”‚   â”œâ”€â”€ home.json
â”‚   â””â”€â”€ services.json
â”œâ”€â”€ fr/
â”‚   â””â”€â”€ ...
â””â”€â”€ de/
    â””â”€â”€ ...
```

## ğŸ¯ Uso en Componentes Astro

### Importar traducciones

```astro
---
import { t } from 'astro-i18next';
---

<h1>{t('site.name')}</h1>
<p>{t('site.tagline')}</p>
```

### Rutas localizadas

```astro
---
import { localizePath } from 'astro-i18next';
---

<a href={localizePath('/servicios')}>
  {t('nav.services')}
</a>
```

### Obtener idioma actual

```astro
---
import { l18next } from 'astro-i18next';

const currentLang = l18next.language; // 'es', 'en', 'fr', 'de'
---
```

## ğŸŒ Rutas Multi-idioma

### Estructura de URLs

```
EspaÃ±ol (default):  https://scorusfitness.com/servicios
InglÃ©s:             https://scorusfitness.com/en/services
FrancÃ©s:            https://scorusfitness.com/fr/services
AlemÃ¡n:             https://scorusfitness.com/de/dienstleistungen
```

### Routing AutomÃ¡tico

astro-i18next maneja automÃ¡ticamente:
- DetecciÃ³n del idioma del navegador
- RedirecciÃ³n a la versiÃ³n correcta
- GeneraciÃ³n de enlaces alternativos (`<link rel="alternate" hreflang="...">`

)

## ğŸ“ AÃ±adir Nuevas Traducciones

### 1. Crear nueva key en JSON

**`public/locales/es/common.json`**
```json
{
  "new_section": {
    "title": "Nuevo TÃ­tulo",
    "description": "Nueva descripciÃ³n"
  }
}
```

### 2. Traducir a otros idiomas

**`public/locales/en/common.json`**
```json
{
  "new_section": {
    "title": "New Title",
    "description": "New description"
  }
}
```

Repetir para `fr` y `de`.

### 3. Usar en componentes

```astro
---
import { t } from 'astro-i18next';
---

<h2>{t('new_section.title')}</h2>
<p>{t('new_section.description')}</p>
```

## ğŸ”§ Componentes i18n

### LanguageSwitcher

Selector de idioma ubicado en el header.

**UbicaciÃ³n:** `src/components/i18n/LanguageSwitcher.astro`

**CaracterÃ­sticas:**
- Dropdown minimalista
- Muestra idioma actual
- Mantiene la ruta actual al cambiar idioma
- Estilo coherente con el diseÃ±o

### Helpers

**UbicaciÃ³n:** `src/lib/i18n/helpers.ts`

Funciones Ãºtiles:
```typescript
import { getLangFromUrl, translatePath, getLanguageName } from '@/lib/i18n/helpers';

const lang = getLangFromUrl(Astro.url);        // 'es', 'en', etc.
const path = translatePath('/servicios', 'en'); // '/en/services'
const name = getLanguageName('fr');              // 'FranÃ§ais'
```

## ğŸ“– Namespaces Disponibles

1. **common** - Elementos compartidos (nav, footer, CTAs)
2. **home** - PÃ¡gina principal
3. **services** - Todas las pÃ¡ginas de servicios
4. **academy** - Academia y programas
5. **gym** - PÃ¡gina del gimnasio
6. **bio** - BiografÃ­a
7. **contact** - Contacto

## ğŸš€ Build y GeneraciÃ³n de PÃ¡ginas

Durante el build, astro-i18next genera automÃ¡ticamente:
- Una versiÃ³n de cada pÃ¡gina para cada idioma
- Sitemaps multi-idioma
- Alternate links para SEO

```bash
npm run build
```

Genera:
```
dist/
â”œâ”€â”€ index.html              # EspaÃ±ol (default)
â”œâ”€â”€ servicios/
â”‚   â””â”€â”€ index.html
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ index.html
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ index.html
â”œâ”€â”€ fr/
â”‚   â””â”€â”€ ...
â””â”€â”€ de/
    â””â”€â”€ ...
```

## ğŸ¨ Best Practices

### âœ… DO

- **Usar keys descriptivas**: `services.personal_training.title` mejor que `spt`
- **Agrupar por contexto**: Usar namespaces para organizar
- **Mantener consistencia**: Misma estructura JSON en todos los idiomas
- **Documentar keys nuevas**: Comentar traducciones complejas

### âŒ DON'T

- **Hardcodear texto**: Siempre usar `t('key')` en lugar de texto directo
- **Mezclar idiomas**: No poner inglÃ©s en archivos `es.json`
- **Keys genÃ©ricas**: Evitar `button1`, `text2`, etc.

## ğŸ” Testing Multi-idioma

### Probar localmente

```bash
npm run dev
```

Visita:
- `http://localhost:4321/` (EspaÃ±ol)
- `http://localhost:4321/en/` (InglÃ©s)
- `http://localhost:4321/fr/` (FrancÃ©s)
- `http://localhost:4321/de/` (AlemÃ¡n)

### Verificar traducciones

1. Navega a cada versiÃ³n del sitio
2. Verifica que todo el texto estÃ¡ traducido
3. Comprueba que los links funcionan correctamente
4. Revisa que el Language Switcher funciona

## ğŸ“š Recursos

- [DocumentaciÃ³n astro-i18next](https://github.com/yassinedoghri/astro-i18next)
- [Best Practices i18n](https://www.i18next.com/principles/best-practices)
- [Astro i18n Routing](https://docs.astro.build/en/guides/internationalization/)

## ğŸ†˜ Troubleshooting

### Las traducciones no aparecen

1. Verifica que el archivo JSON existe en `public/locales/{lang}/`
2. Comprueba que la key existe en el JSON
3. Reinicia el servidor de desarrollo

### Links rotos entre idiomas

1. Usa siempre `localizePath()` para generar URLs
2. Verifica la configuraciÃ³n de `routes` en `astro-i18next.config.mjs`

### Error "Cannot find module 'astro-i18next'"

```bash
npm install
```

## ğŸ“ Checklist para Nuevas PÃ¡ginas

- [ ] Crear traducciones en los 4 idiomas (es, en, fr, de)
- [ ] Usar `t()` para todo el texto
- [ ] Usar `localizePath()` para todos los links
- [ ] Agregar meta tags con `hreflang` alternates
- [ ] Probar en los 4 idiomas localmente
- [ ] Verificar que el Language Switcher funciona

