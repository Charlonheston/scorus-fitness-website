# Sistema de Internacionalización (i18n)

## 📋 Descripción

El sitio Scorus Fitness soporta **4 idiomas** configurados desde el inicio:

- 🇪🇸 **Español (ES)** - Idioma por defecto
- 🇬🇧 **Inglés (EN)**
- 🇫🇷 **Francés (FR)**
- 🇩🇪 **Alemán (DE)**

## 🏗️ Estructura del Sistema

### Herramienta: **astro-i18next**

Usamos [astro-i18next](https://github.com/yassinedoghri/astro-i18next) que proporciona:
- Traducción de contenido
- Routing multi-idioma
- Detección automática de idioma
- Cambio de idioma sin recargar

### Archivos de Configuración

#### 1. `astro-i18next.config.mjs`
```javascript
{
  defaultLocale: "es",          // Español por defecto
  locales: ["es", "en", "fr", "de"],
  routes: {
    // Rutas traducidas para cada idioma
    en: { "servicios": "services", ... },
    fr: { "servicios": "services", ... },
    de: { "servicios": "dienstleistungen", ... }
  },
  namespaces: ["common", "home", "services", ...],
  defaultNamespace: "common"
}
```

#### 2. Archivos de Traducción

Ubicados en `public/locales/{lang}/{namespace}.json`

```
public/locales/
├── es/
│   ├── common.json
│   ├── home.json
│   └── services.json
├── en/
│   ├── common.json
│   ├── home.json
│   └── services.json
├── fr/
│   └── ...
└── de/
    └── ...
```

## 🎯 Uso en Componentes Astro

### Importar traducciones

```astro
---
import { t } from 'astro-i18next';
---

<h1>{t('site.name')}</h1>
<p>{t('site.tagline')}</p>
```

### Rutas localizadas

```astro
---
import { localizePath } from 'astro-i18next';
---

<a href={localizePath('/servicios')}>
  {t('nav.services')}
</a>
```

### Obtener idioma actual

```astro
---
import { l18next } from 'astro-i18next';

const currentLang = l18next.language; // 'es', 'en', 'fr', 'de'
---
```

## 🌐 Rutas Multi-idioma

### Estructura de URLs

```
Español (default):  https://scorusfitness.com/servicios
Inglés:             https://scorusfitness.com/en/services
Francés:            https://scorusfitness.com/fr/services
Alemán:             https://scorusfitness.com/de/dienstleistungen
```

### Routing Automático

astro-i18next maneja automáticamente:
- Detección del idioma del navegador
- Redirección a la versión correcta
- Generación de enlaces alternativos (`<link rel="alternate" hreflang="...">`

)

## 📝 Añadir Nuevas Traducciones

### 1. Crear nueva key en JSON

**`public/locales/es/common.json`**
```json
{
  "new_section": {
    "title": "Nuevo Título",
    "description": "Nueva descripción"
  }
}
```

### 2. Traducir a otros idiomas

**`public/locales/en/common.json`**
```json
{
  "new_section": {
    "title": "New Title",
    "description": "New description"
  }
}
```

Repetir para `fr` y `de`.

### 3. Usar en componentes

```astro
---
import { t } from 'astro-i18next';
---

<h2>{t('new_section.title')}</h2>
<p>{t('new_section.description')}</p>
```

## 🔧 Componentes i18n

### LanguageSwitcher

Selector de idioma ubicado en el header.

**Ubicación:** `src/components/i18n/LanguageSwitcher.astro`

**Características:**
- Dropdown minimalista
- Muestra idioma actual
- Mantiene la ruta actual al cambiar idioma
- Estilo coherente con el diseño

### Helpers

**Ubicación:** `src/lib/i18n/helpers.ts`

Funciones útiles:
```typescript
import { getLangFromUrl, translatePath, getLanguageName } from '@/lib/i18n/helpers';

const lang = getLangFromUrl(Astro.url);        // 'es', 'en', etc.
const path = translatePath('/servicios', 'en'); // '/en/services'
const name = getLanguageName('fr');              // 'Français'
```

## 📖 Namespaces Disponibles

1. **common** - Elementos compartidos (nav, footer, CTAs)
2. **home** - Página principal
3. **services** - Todas las páginas de servicios
4. **academy** - Academia y programas
5. **gym** - Página del gimnasio
6. **bio** - Biografía
7. **contact** - Contacto

## 🚀 Build y Generación de Páginas

Durante el build, astro-i18next genera automáticamente:
- Una versión de cada página para cada idioma
- Sitemaps multi-idioma
- Alternate links para SEO

```bash
npm run build
```

Genera:
```
dist/
├── index.html              # Español (default)
├── servicios/
│   └── index.html
├── en/
│   ├── index.html
│   └── services/
│       └── index.html
├── fr/
│   └── ...
└── de/
    └── ...
```

## 🎨 Best Practices

### ✅ DO

- **Usar keys descriptivas**: `services.personal_training.title` mejor que `spt`
- **Agrupar por contexto**: Usar namespaces para organizar
- **Mantener consistencia**: Misma estructura JSON en todos los idiomas
- **Documentar keys nuevas**: Comentar traducciones complejas

### ❌ DON'T

- **Hardcodear texto**: Siempre usar `t('key')` en lugar de texto directo
- **Mezclar idiomas**: No poner inglés en archivos `es.json`
- **Keys genéricas**: Evitar `button1`, `text2`, etc.

## 🔍 Testing Multi-idioma

### Probar localmente

```bash
npm run dev
```

Visita:
- `http://localhost:4321/` (Español)
- `http://localhost:4321/en/` (Inglés)
- `http://localhost:4321/fr/` (Francés)
- `http://localhost:4321/de/` (Alemán)

### Verificar traducciones

1. Navega a cada versión del sitio
2. Verifica que todo el texto está traducido
3. Comprueba que los links funcionan correctamente
4. Revisa que el Language Switcher funciona

## 📚 Recursos

- [Documentación astro-i18next](https://github.com/yassinedoghri/astro-i18next)
- [Best Practices i18n](https://www.i18next.com/principles/best-practices)
- [Astro i18n Routing](https://docs.astro.build/en/guides/internationalization/)

## 🆘 Troubleshooting

### Las traducciones no aparecen

1. Verifica que el archivo JSON existe en `public/locales/{lang}/`
2. Comprueba que la key existe en el JSON
3. Reinicia el servidor de desarrollo

### Links rotos entre idiomas

1. Usa siempre `localizePath()` para generar URLs
2. Verifica la configuración de `routes` en `astro-i18next.config.mjs`

### Error "Cannot find module 'astro-i18next'"

```bash
npm install
```

## 📝 Checklist para Nuevas Páginas

- [ ] Crear traducciones en los 4 idiomas (es, en, fr, de)
- [ ] Usar `t()` para todo el texto
- [ ] Usar `localizePath()` para todos los links
- [ ] Agregar meta tags con `hreflang` alternates
- [ ] Probar en los 4 idiomas localmente
- [ ] Verificar que el Language Switcher funciona

