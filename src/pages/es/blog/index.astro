---
/**
 * Listado de posts del blog
 */

import Layout from '@/layouts/Layout.astro';
import Section from '@/components/ui/Section.astro';
import Card from '@/components/ui/Card.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const posts = allPosts.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<Layout
  title="Blog | Scorus Fitness"
  description="Artículos sobre fitness, nutrición, culturismo y entrenamiento personal"
>
  <Section spacing="lg" background="white">
    <div class="mb-12 text-center">
      <h1 class="mb-4">Blog</h1>
      <p class="mx-auto max-w-2xl text-xl text-gray-600">
        Consejos, guías y conocimiento sobre fitness, nutrición y desarrollo personal
      </p>
    </div>

    {posts.length === 0 ? (
      <div class="rounded-lg border-2 border-dashed border-gray-300 p-12 text-center">
        <p class="text-lg text-gray-500">No hay artículos publicados todavía.</p>
      </div>
    ) : (
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        {posts.map((post) => (
          <Card hover padding="lg">
            <div class="mb-3 text-sm text-gray-500">
              {post.data.pubDate.toLocaleDateString('es-ES', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
              })}
            </div>
            <h3 class="mb-3 text-xl font-bold text-gray-900">
              {post.data.title}
            </h3>
            <p class="mb-4 text-gray-600">{post.data.description}</p>
            <div class="flex flex-wrap gap-2">
              {post.data.tags.map((tag) => (
                <span class="rounded-full bg-primary-100 px-3 py-1 text-xs font-medium text-primary-700">
                  {tag}
                </span>
              ))}
            </div>
            <a
              href={`/es/blog/${post.slug}`}
              class="mt-4 inline-flex items-center font-medium text-primary-600 transition-colors hover:text-primary-700"
            >
              Leer más →
            </a>
          </Card>
        ))}
      </div>
    )}
  </Section>
</Layout>

