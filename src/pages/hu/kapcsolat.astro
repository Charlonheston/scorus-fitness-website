---
/**
 * Kapcsolat oldal - Húngaro
 */

import Layout from '@/layouts/Layout.astro';
import { CONTACT_INFO } from '@lib/constants';
import translations from '../../../public/locales/hu/contact.json';

const t = translations;
---

<Layout 
  title={t.meta.title}
  description={t.meta.description}
>
  <!-- Hero Section (Netflix stílus) -->
  <section class="relative overflow-hidden bg-black py-28 text-white">
    <div class="pointer-events-none absolute inset-0">
      <div class="absolute -top-40 left-1/2 h-[600px] w-[600px] -translate-x-1/2 rounded-full bg-red-600/20 blur-3xl"></div>
      <div class="absolute bottom-0 left-0 right-0 h-1/2 bg-gradient-to-t from-black to-transparent"></div>
    </div>
    <div class="container relative">
      <div class="mx-auto max-w-3xl text-center">
        <h1 class="mb-5 bg-gradient-to-b from-white to-white/70 bg-clip-text text-5xl font-black uppercase tracking-tighter text-transparent md:text-7xl">
          {t.hero.title}
        </h1>
        <p class="mx-auto mb-10 max-w-2xl text-lg text-gray-300 md:text-xl">
          {t.hero.subtitle}
        </p>

        <div class="flex flex-col items-center justify-center gap-4 sm:flex-row sm:gap-6">
          <a href={`tel:${CONTACT_INFO.phone}`} class="inline-flex items-center justify-center rounded-lg bg-red-600 px-8 py-4 text-sm font-bold uppercase tracking-wider text-white transition-all hover:bg-red-700 hover:shadow-lg hover:shadow-red-600/30">
            {t.cta.button}
          </a>
          <a href={`https://wa.me/34673975252`} target="_blank" rel="noopener" class="inline-flex items-center justify-center rounded-lg border-2 border-white/20 bg-white/5 px-8 py-4 text-sm font-bold uppercase tracking-wider text-white transition-all hover:border-red-600 hover:bg-red-600/10">
            WhatsApp
          </a>
        </div>

        <div class="mt-8 text-sm text-gray-400">
          <span class="mr-4">{CONTACT_INFO.phone}</span>
          <span class="opacity-50">•</span>
          <span class="ml-4">{CONTACT_INFO.email}</span>
        </div>
      </div>
    </div>
  </section>

  <!-- Cards (Glass) + keep map below -->
  <section class="relative z-10 -mt-10 bg-gradient-to-b from-black via-black to-gray-950 py-12">
    <div class="container">
      <div class="grid gap-5 sm:grid-cols-2 lg:grid-cols-3">
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 text-white backdrop-blur-xl">
          <p class="mb-2 text-xs font-bold uppercase tracking-wider text-white/60">{t.info.phone}</p>
          <a href={`tel:${CONTACT_INFO.phone}`} class="text-lg font-semibold text-white hover:text-red-400">{CONTACT_INFO.phone}</a>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 text-white backdrop-blur-xl">
          <p class="mb-2 text-xs font-bold uppercase tracking-wider text-white/60">{t.info.email}</p>
          <a href={`mailto:${CONTACT_INFO.email}`} class="break-all text-lg font-semibold text-white hover:text-red-400">{CONTACT_INFO.email}</a>
        </div>
        <div class="rounded-xl border border-white/10 bg-white/5 p-6 text-white backdrop-blur-xl">
          <p class="mb-2 text-xs font-bold uppercase tracking-wider text-white/60">{t.info.address}</p>
          <p class="text-white/90">{CONTACT_INFO.address}</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Map Section -->
  <section class="bg-gray-100 py-24">
    <div class="container">
      <div class="mx-auto max-w-5xl px-4">
        <h2 class="mb-8 text-3xl sm:text-4xl font-black uppercase text-center text-black">{t.hero.title}</h2>
        <div class="aspect-video w-full overflow-hidden rounded-lg shadow-2xl">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3134.0573859678823!2d-0.5162!3d38.3825!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x0%3A0x0!2zMzjCsDIyJzU3LjAiTiAwwrAzMCc1OC4zIlc!5e0!3m2!1sen!2ses!4v1234567890"
            width="100%"
            height="100%"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
          ></iframe>
        </div>
      </div>
    </div>
  </section>

  <!-- Hours Section -->
  <section class="bg-black py-24 text-white">
    <div class="container">
      <div class="mx-auto max-w-3xl text-center px-4">
        <h2 class="mb-8 text-3xl sm:text-4xl font-black uppercase">{t.info.schedule}</h2>
        <div class="space-y-3 text-base sm:text-lg">
          <p>{t.info.schedule_value}</p>
        </div>
        <p class="mt-8 text-gray-400 text-sm sm:text-base">
          * Előzetes időpont egyeztetés ajánlott
        </p>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section class="bg-white py-24">
    <div class="container">
      <div class="mx-auto max-w-3xl px-4">
        <h2 class="mb-8 text-3xl font-black uppercase text-black">{t.form.title}</h2>
        <form id="contactForm" class="space-y-6">
          <div>
            <label for="name" class="mb-2 block text-sm font-semibold text-gray-900">{t.form.name}</label>
            <input type="text" id="name" name="name" required class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20" placeholder={t.form.name_placeholder} />
          </div>
          <div>
            <label for="email" class="mb-2 block text-sm font-semibold text-gray-900">{t.form.email}</label>
            <input type="email" id="email" name="email" required class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20" placeholder={t.form.email_placeholder} />
          </div>
          <div>
            <label for="phone" class="mb-2 block text-sm font-semibold text-gray-900">{t.form.phone}</label>
            <input type="tel" id="phone" name="phone" class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20" placeholder={t.form.phone_placeholder} />
          </div>
          <div>
            <label for="service" class="mb-2 block text-sm font-semibold text-gray-900">{t.form.service}</label>
            <select id="service" name="service" class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 transition-colors focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20">
              <option value="">{t.form.service_placeholder}</option>
              <option value="personal">{t.form.service_personal}</option>
              <option value="online">{t.form.service_online}</option>
              <option value="gym">{t.form.service_gym}</option>
              <option value="campus">{t.form.service_campus}</option>
              <option value="reborn">{t.form.service_reborn}</option>
              <option value="other">{t.form.service_other}</option>
            </select>
          </div>
          <div>
            <label for="message" class="mb-2 block text-sm font-semibold text-gray-900">{t.form.message}</label>
            <textarea id="message" name="message" rows="5" required class="w-full rounded-lg border border-gray-300 bg-white px-4 py-3 text-gray-900 placeholder-gray-500 transition-colors focus:border-red-600 focus:outline-none focus:ring-2 focus:ring-red-600/20" placeholder={t.form.message_placeholder}></textarea>
          </div>
          <button type="submit" class="w-full rounded-lg bg-red-600 px-6 py-3 font-bold uppercase text-white transition-all duration-300 hover:bg-red-700 hover:shadow-lg focus:outline-none focus:ring-2 focus:ring-red-600/50">{t.form.submit}</button>
        </form>
      </div>
    </div>
  </section>
</Layout>

<script is:inline>
window.addEventListener('DOMContentLoaded', () => {
  const el = document.getElementById('contact-translations-hu');
  const translations = el ? JSON.parse(el.textContent || '{}') : {};
  const formEl = document.getElementById('contactForm');
  formEl?.addEventListener('submit', async (e) => {
    e.preventDefault();
    const form = e.target;
    const button = form.querySelector('button[type="submit"]');
    const originalText = button?.textContent;
    try {
      if (button) {
        button.disabled = true;
        button.textContent = `${translations.form?.sending || 'Küldés...'}`;
      }
      const formData = new FormData(form);
      const data = Object.fromEntries(formData);
      const message = `\nÚj kapcsolatfelvételi kérés\n\n\nNév: ${data.name}\n\nEmail: ${data.email}\n\nTelefon: ${data.phone || 'N/A'}\n\nSzolgáltatás: ${data.service || 'N/A'}\n\n\nÜzenet:\n${data.message}`.trim();
      const whatsappLink = `https://wa.me/34673975252?text=${encodeURIComponent(message)}`;
      window.open(whatsappLink, '_blank');
      if (button) {
        button.textContent = `${translations.form?.success || 'Elküldve'}`;
        button.classList.add('!bg-green-600', 'hover:!bg-green-700');
      }
      form.reset();
      setTimeout(() => {
        if (button) {
          button.textContent = originalText || `${translations.form?.submit || 'Küldés'}`;
          button.classList.remove('!bg-green-600', 'hover:!bg-green-700');
          button.disabled = false;
        }
      }, 3000);
    } catch (error) {
      console.error('Error:', error);
      if (button) {
        button.textContent = `${translations.form?.error || 'Hiba'}`;
        button.classList.add('!bg-red-800');
      }
      setTimeout(() => {
        if (button) {
          button.textContent = originalText || `${translations.form?.submit || 'Küldés'}`;
          button.classList.remove('!bg-red-800');
          button.disabled = false;
        }
      }, 2000);
    }
  });
});
</script>
<script type="application/json" id="contact-translations-hu">{JSON.stringify(t)}</script>

