---
/**
 * ButtonGhost - Bot칩n Minimalista/Ghost
 * Dise침o 2025: Hover underline animation, sin fondo
 * 
 * Props:
 * - href: string (URL destino)
 * - text: string (Texto del bot칩n)
 * - icon?: 'arrow' | 'chevron' | 'external' | 'none' (Icono, default: 'arrow')
 * - class: string (Clases adicionales)
 * - color: 'red' | 'white' | 'black' (Color del texto, default: 'red')
 * - size: 'sm' | 'md' | 'lg' (Tama침o, default: 'md')
 */

type ButtonColor = 'red' | 'white' | 'black';
type ButtonSize = 'sm' | 'md' | 'lg';

interface Props {
  href: string;
  text: string;
  icon?: 'arrow' | 'chevron' | 'external' | 'none';
  class?: string;
  color?: ButtonColor;
  size?: ButtonSize;
}

const {
  href,
  text,
  icon = 'arrow',
  class: className = '',
  color = 'red',
  size = 'md'
} = Astro.props;

const colorClasses: Record<ButtonColor, string> = {
  red: 'text-red-500',
  white: 'text-white',
  black: 'text-gray-900',
};

const colorVars: Record<ButtonColor, string> = {
  red: '220 38 38',    // rgb values for tailwind red-600
  white: '255 255 255',
  black: '15 23 42',   // slate-900ish
};

const sizeClasses: Record<ButtonSize, string> = {
  sm: 'text-xs gap-2 px-4 py-2',
  md: 'text-sm gap-3 px-6 py-3',
  lg: 'text-base gap-4 px-8 py-4',
};

const iconSizes: Record<ButtonSize, string> = {
  sm: 'h-4 w-4',
  md: 'h-5 w-5',
  lg: 'h-6 w-6',
};
---

<a
  href={href}
  class:list={[
    'btn-ghost group inline-flex items-center justify-center font-semibold uppercase tracking-[0.25em] transition-all duration-300',
    'bg-transparent text-center',
    colorClasses[color],
    sizeClasses[size],
    className
  ]}
  style={`--ghost-color: ${colorVars[color]};`}
>
  <!-- Texto con underline animado -->
  <span class="relative">
    {text}
    <span class="btn-underline"></span>
  </span>
  
  <!-- Iconos -->
  {icon === 'arrow' && (
    <svg 
      class:list={["transition-transform duration-300 group-hover:translate-x-2", iconSizes[size]]}
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor" 
      stroke-width="2.5"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
    </svg>
  )}
  
  {icon === 'chevron' && (
    <svg 
      class:list={["transition-transform duration-300 group-hover:translate-x-1", iconSizes[size]]}
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor" 
      stroke-width="2.5"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7"/>
    </svg>
  )}
  
  {icon === 'external' && (
    <svg 
      class:list={["transition-transform duration-300 group-hover:translate-x-0.5 group-hover:-translate-y-0.5", iconSizes[size]]}
      fill="none" 
      viewBox="0 0 24 24" 
      stroke="currentColor" 
      stroke-width="2.5"
      aria-hidden="true"
    >
      <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
    </svg>
  )}
</a>

<style>
  .btn-ghost {
    --ghost-color: 220 38 38;
    position: relative;
    isolation: isolate;
    border-radius: 999px;
    border: 1px solid rgb(var(--ghost-color) / 0.35);
    padding-inline: 1.5rem;
    letter-spacing: 0.25em;
  }

  .btn-ghost::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: radial-gradient(circle at 20% 20%, rgb(var(--ghost-color) / 0.18), transparent 70%);
    opacity: 0;
    transform: scaleX(0.9);
    transform-origin: left;
    transition: opacity 0.35s ease, transform 0.35s ease;
    z-index: -1;
  }

  .btn-ghost::after {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: inherit;
    background: rgba(0, 0, 0, 0.15);
    opacity: 0.05;
    z-index: -2;
  }

  .btn-ghost:hover,
  .btn-ghost:focus-visible {
    transform: translateX(6px);
  }

  .btn-ghost:hover::before,
  .btn-ghost:focus-visible::before {
    opacity: 1;
    transform: scaleX(1);
  }

  .btn-underline {
    position: absolute;
    bottom: -6px;
    left: 0;
    width: 0;
    height: 2px;
    background: currentColor;
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .btn-ghost:hover .btn-underline {
    width: 100%;
  }

  .btn-ghost:focus-visible {
    outline: none;
    box-shadow: 0 0 0 2px rgb(var(--ghost-color) / 0.35);
  }
</style>
